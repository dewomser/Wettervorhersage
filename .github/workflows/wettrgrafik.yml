name: Wettervorhersage

on:
  push:
    

jobs:
  wettervorhersage:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2 # Repo auschecken
      - name: Gnuplot und Bash installieren
        run: sudo apt update && sudo apt install gnuplot bash python # Gnuplot und Bash installieren
      
      - name: python-Skript ausführen
        run: pip install wetterdienst
      - name: bash script ausführen
        run: bash wetter10.sh # Bash-Skript ausführen, das die Wetterdaten abruft und eine Datei namens wetter.dat erzeugt
      
      - name: Grafik in README.md einfügen
        run: | # Mehrzeiliges Kommando
          # Die README.md-Datei mit der Grafik aktualisieren
          echo "# Wettervorhersage" > README.md
          echo "!Wetter" >> README.md
          # Die Änderungen committen und pushen
          git config --global user.name "dewomser"
          git config --global user.email "webmaster@untergang.de"
          git add README.md wetter.png
          git commit -m "Wettervorhersage aktualisiert"
          git push
