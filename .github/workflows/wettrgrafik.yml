name: Wettervorhersage

on:
  schedule:
    - cron: '0 0 * * *' # Jede Nacht um Mitternacht

jobs:
  wettervorhersage:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2 # Repo auschecken
      - name: Gnuplot und Bash installieren
        run: sudo apt update && sudo apt install gnuplot bash # Gnuplot und Bash installieren
      - name: Bash-Skript ausführen
        run: bash wetter10.sh # Bash-Skript ausführen, das die Wetterdaten abruft und eine Datei namens wetter.dat erzeugt
      - name: Gnuplot-Skript ausführen
        run: gnuplot wetter1.gp # Gnuplot-Skript ausführen, das die Grafik aus der Datei wetter.dat erzeugt und eine Datei namens wetter.png speichert
      - name: Grafik in README.md einfügen
        run: | # Mehrzeiliges Kommando
          # Die README.md-Datei mit der Grafik aktualisieren
          echo "# Wettervorhersage" > README.md
          echo "!Wetter" >> README.md
          # Die Änderungen committen und pushen
          git config --global user.name "dewomser"
          git config --global user.email "webmaster@untergang.de"
          git add README.md wetter.png
          git commit -m "Wettervorhersage aktualisiert"
          git push
